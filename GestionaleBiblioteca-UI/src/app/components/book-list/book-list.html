<div class="d-flex justify-content-between align-items-center mb-3">
  <h2>Elenco Libri</h2>
  
  <button class="btn btn-success" (click)="toggleForm()">
    <i class="bi" [ngClass]="showForm ? 'bi-dash-lg' : 'bi-plus-lg'"></i>
    {{ showForm ? 'Chiudi Form' : 'Aggiungi Libro' }}
  </button>
</div>
<div class="mb-3">
  <div class="input-group shadow-sm">
    <span class="input-group-text bg-white"><i class="bi bi-search"></i></span>
    <input type="text" class="form-control border-start-0" 
           placeholder="Cerca per titolo o genere..." 
           [(ngModel)]="searchTerm">
  </div>
</div>

<div class="card shadow">
  <div class="table-responsive">
    <table class="table table-striped table-hover mb-0">
      <thead class="table-dark">
        <tr>
          <th>Titolo</th>
          <th>Genere</th>
          <th>Autore</th>
          <th>Anno</th>
          <th class="text-center">Azioni</th>
        </tr>
      </thead>
      <tbody>
  @for (b of filteredBooks; track b.id) {
    <tr>
      <td>{{ b.title }}</td>
      <td><span class="badge bg-secondary">{{ b.genre }}</span></td>
      <td>{{ b.author?.name }} {{ b.author?.surname }}</td>
      <td>{{ b.publishingYear }}</td>
      <td class="text-center">
        <button class="btn btn-warning btn-sm me-2" (click)="editBook(b)">
          <i class="bi bi-pencil"></i> Modifica
        </button>
        <button class="btn btn-danger btn-sm" (click)="deleteBook(b.id)">
          <i class="bi bi-trash"></i> Elimina
        </button>
      </td>
    </tr>
  } @empty {
    <tr>
      <td colspan="5" class="text-center text-muted">
        Nessun libro trovato per questa ricerca.
      </td>
    </tr>
  }
</tbody>
    </table>
  </div>
</div>

@if (books.length === 0) {
  <div class="alert alert-info mt-3">Nessun libro trovato o caricamento in corso...</div>
}
@if (showForm) {
  <div class="mb-4">
    <app-book-form 
      [editData]="bookToEdit" 
      (bookAdded)="loadBooks(); toggleForm()">
    </app-book-form>
  </div>
}
<p *ngIf="books.length === 0">Nessun libro trovato o caricamento in corso...</p>


